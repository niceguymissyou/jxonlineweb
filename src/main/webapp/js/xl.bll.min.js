var xl=function(a){return document.getElementById(a)};xl.addBookmark=function(c,a){try{if(navigator.userAgent.indexOf("QQBrowser")!=-1){alert("加入收藏失败，请使用Ctrl+D进行添加")}else{window.external.AddFavorite(a,c)}}catch(b){try{window.sidebar.addPanel(c,a,"")}catch(b){alert("加入收藏失败，请使用Ctrl+D进行添加")}}};xl.P=function(f){var d,e,c,a,b;d=window.location.href;e=d.indexOf("?");c=d.substring(e+1);a=c.split("&");b="";for(i=0;i<a.length;i++){b=a[i];e=b.indexOf("=");if(b.substring(0,e).toLowerCase()==f.toLowerCase()){return b.substring(e+1)}}return null};xl.jumpTo=function(a){var d=null;try{var b=navigator.userAgent.toLowerCase();if(/chrome/i.test(b)||/SE\s([\d.]*)/.test(b)){location.href=a;return false}d=window.open(a)}catch(c){}if(!d){location.href=a}};xl.formSubmit=function(a){if(!a){return}var f="_ajaxSubmitForm";var e,g,h,k,j;var b=document.getElementById(f);if(!b){var b=document.createElement("FORM");document.body.appendChild(b);b.id=f;b.method="POST"}b.innerHTML="";g=a.indexOf("?");var d=a;if(g>0){d=a.substring(0,g)}b.target="_blank";b.action=d;h=a.substring(g+1);k=h.split("&");for(i=0;i<k.length;i++){j=k[i];g=j.indexOf("=");var c=document.createElement("input");c.setAttribute("name",j.substring(0,g));c.setAttribute("type","hidden");if(j.substring(g+1)!=""){c.setAttribute("value",j.substring(g+1))}else{c.setAttribute("value",encodeURIComponent(j.substring(g+1)))}b.appendChild(c)}b.submit()};xl.setCookie=function(a,b,d){var c=a+"="+encodeURIComponent(b);if(d&&d.expires){if(d.expires!="session"){var e=new Date();if(d.expires instanceof Date){e=d.expires}else{if(!isNaN(d.expires)){e.setTime(e.getTime()+d.expires)}else{if(d.expires=="hour"){e.setHours(e.getHours()+1)}else{if(d.expires=="day"){e.setDate(e.getDate()+1)}else{if(d.expires=="week"){e.setDate(e.getDate()+7)}else{if(d.expires=="year"){e.setFullYear(e.getFullYear()+1)}else{if(d.expires=="forever"){e.setFullYear(e.getFullYear()+120)}else{e=d.expires}}}}}}}c+="; expires="+e.toUTCString()}}if(d&&d.path){c+="; path="+d.path}else{c+="; path=/"}if(d&&d.domain){c+="; domain="+d.domain}else{c+="; domain=.xunlei.com"}if(d&&d.secure){c+="; secure="+d.secure}document.cookie=c};xl.delCookie=function(a){xl.setCookie(a,"",{expires:new Date(0)})};xl.getCookie=function(b){var c=b+"=";if(document.cookie.length>0){var d=document.cookie.indexOf(c);if(d!=-1){d+=c.length;var a=document.cookie.indexOf(";",d);if(a==-1){a=document.cookie.length}return decodeURIComponent(document.cookie.substring(d,a))}else{return null}}};xl.json={};xl.json._toIntegersAtLease=function(a){return a<10?"0"+a:a};xl.json._escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;xl.json._meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};xl.json._quoteString=function(a){if(xl.json._escapeable.test(a)){return'"'+a.replace(xl.json._escapeable,function(b){var d=xl.json._meta[b];if(typeof d==="string"){return d}d=b.charCodeAt();return"\\u00"+Math.floor(d/16).toString(16)+(d%16).toString(16)})+'"'}return'"'+a+'"'};xl.toJSON=function(h,f){var e=typeof(h);if(e=="undefined"){return"undefined"}else{if(e=="number"||e=="boolean"){return h+""}else{if(h===null){return"null"}}}if(e=="object"&&h instanceof Date){return h.getUTCFullYear()+"-"+xl.json._toIntegersAtLease(h.getUTCMonth())+"-"+xl.json._toIntegersAtLease(h.getUTCDate())}if(e=="string"){return xl.json._quoteString(h)}if(e=="object"&&typeof h.toJSON=="function"){return h.toJSON(f)}if(e!="function"&&typeof(h.length)=="number"){var c=[];for(var d=0;d<h.length;d++){c.push(xl.toJSON(h[d],f))}if(f){return"["+c.join(",")+"]"}else{return"["+c.join(", ")+"]"}}if(e=="function"){throw new TypeError("Unable to convert object of type 'function' to json.")}var c=[];for(var a in h){var b;e=typeof(a);if(e=="number"){b='"'+a+'"'}else{if(e=="string"){b=xl.json._quoteString(a)}else{continue}}var g=xl.toJSON(h[a],f);if(typeof(g)!="string"){continue}if(f){c.push(b+":"+g)}else{c.push(b+": "+g)}}return"{"+c.join(", ")+"}"};xl.evalJSON=function(data){return eval(("("+data+")"))};xl.trim=function(a){return(a||"").replace(/^\s+|\s+$/g,"")};xl.param=function(c){var b="";for(var a in c){b+="&"+a+"="+encodeURIComponent(c[a])}return b.length>1?b.slice(1):b};xl.parseDate=function(c,b){var a=c.split("-");var d=new Date();d.setFullYear(a[0]);if(a[1].charAt(0)=="0"){a[1]=a[1].charAt(1)}d.setMonth(a[1]-1);if(a[2].charAt(0)=="0"){a[2]=a[2].charAt(1)}d.setDate(a[2]);d.setHours(0);d.setMinutes(0);d.setMilliseconds(0);return d};xl.getScript=function(url,params,callback,rtnName,global){global=global===undefined?true:global;setTimeout(function(){var scriptBlock,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;scriptBlock=document.createElement("script");scriptBlock.async="async";var name=rtnName;if(!name||xl.trim(name)==""){name="scriptDataRtn"+(new Date()).getTime()}var s=url.indexOf("?")<0?"?":"&";var surl=s+"rtnName="+name;if(params){var __errorHandler=params.__error?params.__error:null;delete params.__error;surl+="&"+xl.param(params);if(__errorHandler){params.__error=__errorHandler}}scriptBlock.src=url+surl+"&_freshtime"+(new Date()).getTime()+"="+(new Date()).getTime();if(global&&xl.getScript.start){xl.getScript.start()}try{scriptBlock.onerror=typeof params.__error=="function"?params.__error:function(){alert("服务器忙，请稍候重试。");xl.getScript.end()}}catch(e){}scriptBlock.onload=scriptBlock.onreadystatechange=function(){if(/loaded|complete/.test(scriptBlock.readyState)||!scriptBlock.readyState){scriptBlock.onload=scriptBlock.onreadystatechange=null;if(head&&scriptBlock.parentNode){head.removeChild(scriptBlock)}if(window.navigator.userAgent.indexOf("MSIE")>=1){scriptBlock=undefined}if(xl.getScript.timer){clearTimeout(xl.getScript.timer)}if(global&&xl.getScript.end){xl.getScript.end()}try{callback(eval("("+name+")"))}catch(e){if(typeof params.__error=="function"){params.__error()}else{alert("服务器忙，请稍候重试。");xl.getScript.end()}}}};head.insertBefore(scriptBlock,head.firstChild)},20)};xl.getScript.start=function(){if(!document.getElementById("loadingImg")){$('<img style="position: absolute; display: none;z-index:3001; width:32px;height:32px" id="loadingImg" src="http://img.mygame.xunlei.com/img/loading02.gif"/>').appendTo("body")}$("#loadingImg").popupOpen(function(){},false);xl.ui.showCover(true,{"z-index":3000,filter:"alpha(opacity=0)","-moz-opacity":0,opacity:0},"__loadingMask");xl.getScript.timer=setTimeout(function(){$("#loadingImg").popupClose(function(){},false);xl.ui.showCover(false,{},"__loadingMask");clearTimeout(xl.getScript.timer)},8000)};xl.getScript.end=function(){$("#loadingImg").popupClose(function(){},false);xl.ui.showCover(false,{},"__loadingMask");clearTimeout(xl.getScript.timer)};xl.toArray=function(c){var b=[];if(!c){return b}for(var d=0,a=c.length;d<a;d++){b.push(c[d])}return b};xl.extend=function(b,a){try{for(key in a){b[key]=a[key]}return b}catch(c){throw c}};var Class=(function(){function a(){}function b(){var e=null,d=xl.toArray(arguments);if(typeof d[0]=="function"){e=d.shift()}function c(){this.initialize.apply(this,arguments)}if(e){a.prototype=e.prototype;c.prototype=new a;c.superclass=e}else{c.superclass=Object}xl.extend(c.prototype,d[0]);c.addMethods=function(f){xl.extend(c.prototype,f)};if(!c.prototype.initialize){c.prototype.initialize=function(){}}c.prototype.constructor=c;return c}return{create:b}})();String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/gi,"")};String.prototype.lTrim=function(){return this.replace(/^\s*/gi,"")};String.prototype.rTrim=function(){return this.replace(/\s*$/gi,"")};String.prototype.Replace=function(oldV,newV){return this.replace(eval("/"+oldV.replace(/\\/gi,"\\\\").replace(/(\[|\]|\(|\)|\.|\*|\?)/gi,"\\$1")+"/gi"),newV)};String.prototype.isEmpty=function(){return(this===undefined||this===null||!this.trim())};String.prototype.isNumber=function(){return(!isNaN(this)&&this!=undefined&&this!=null)};String.prototype.bytes=function(){return this.replace(/[^\x00-\xff]/g,"  ").length};xl.ui={};xl.ui.SlideImgs=function(c,b,a){this.imgs=c;this.bts=b;this.cls=a||"up";this.index=1;this.timer=null;this.imgsize=c.size();this.delay=4000};xl.ui.SlideImgs.prototype={slide:function(){this.imgs.hide().eq(this.index).show();this.bts.removeClass(this.cls).eq(this.index).addClass(this.cls).show();this.moveNext()},start:function(a){if(this.imgs.length<=1){return}var b=this;a&&(this.delay=a);this.timer=setInterval(function(){b.slide()},b.delay);this.regEvent()},regEvent:function(){var a=this;this.imgs.add(this.bts.get()).mouseover(function(){clearInterval(a.timer)}).mouseout(function(){a.timer=setInterval(function(){a.slide()},a.delay)});this.bts.click(function(){var b=a.bts.index(this);a.index=b;a.imgs.hide().eq(b).show();a.bts.removeClass(a.cls).eq(b).addClass(a.cls).show();return false})},moveNext:function(){if(this.index<this.imgsize-1){this.index++}else{this.index=0}}};xl.ui.Tabs=function(c,b,a){this.bts=c;this.divs=b||$("<div />");this.cls=a||"up"};xl.ui.Tabs.prototype={init:function(a,b){a=a||"click";b=b||false;var c=this;this.bts.bind(a,function(){var d=c.bts.index(this);c.bts.removeClass(c.cls);$(this).addClass(c.cls);c.show(d,this)});this.bts.click(function(){return b})},show:function(b,a){this.divs.hide().eq(b).show();this.done(b,a)},done:function(b,a){}};xl.ui.Vote=function(b,c,a){var e=this;if(typeof xl.ui.Vote._initialized=="undefined"){var d=xl.ui.Vote.prototype;xl.ui.Vote.prototype.initSubmit=function(f,g){xl.getScript(this._jsonURL,null,function(h){e._initSubmit(f,h,g)},"voteInfo_"+this._gameid+"_"+this._titleid)};d._initSubmit=function(h,l,m){var g=$(h);var j="vote_"+e._gameid+"_"+e._titleid;g.empty();var f="<dl><dt>"+decodeURIComponent(l.title)+"</dt><dd><ul>";for(var k=0;k<l.options.length;k++){f+='<li><input type="radio" value=\''+l.options[k].id+"' name=\""+j+'"/><label for="choose">'+decodeURIComponent(l.options[k].title)+"</label></li>"}f+="</ul></dd></dl>";f+='<p><button type="button" value="提交"></button><a href=\'#\'>查看</a></p>';g.append(f);$("button:eq(0)",g).click(function(){e._submit(h,j)});$("a:eq(0)",g).click(function(){window.open(m+"?"+xl.param({gameid:e._gameid,titleid:e._titleid}))})};d._submit=function(f,g){var h=$("input:checked",$(f)).val();if(h){if(xl.getCookie(g)){alert("一天只能投票一次")}else{xl.getScript(e._submitSvr,{gameid:e._gameid,titleid:e._titleid,rtntype:"script",optionid:h},function(j){if(j.voteSubmitStatus==0){alert("投票成功，谢谢您的参与")}else{alert("投票失败#"+j.voteSubmitStatus)}},"votertn");xl.setCookie(g,1,{expires:"day"})}}else{alert("请选择")}};xl.ui.Vote.prototype.initResult=function(f){xl.getScript(this._jsonURL,null,function(g){e._initResult(f,g)},"voteInfo_"+this._gameid+"_"+this._titleid)};d._initResult=function(f,g){xl.getScript(e._resultSvr,{gameid:e._gameid,titleid:e._titleid,rtntype:"script"},function(h){e._showResult(f,g,h)},"votertn")};d._showResult=function(g,m,n){$(g).empty();var j=0;$.each(n.resultMap,function(p,o){j+=Number(o)});var f="";for(var h=0;h<m.options.length;h++){var l=n.resultMap[m.options[h].id];var k=(j!=0)?(Math.floor((l/j)*100)):0;f+="<li><label>"+decodeURIComponent(m.options[h].title)+"</label>|<strong>"+l+'</strong>票<span><em style="width:'+k+'px;"></em></span>'+k+"%</li>"}$(g).append(f)};xl.ui.Vote._initialized=true}this._gameid=b;this._titleid=c;this._jsonURL="http://mygame.xunlei.com/jsdata/votevar/"+b+"_"+c+".js";this._submitSvr="http://svr.game.xunlei.com:8080/plus/submit.votecount";this._resultSvr="http://svr.game.xunlei.com:8080/plus/result.votecount"};xl.ui.getViewPort=function(c){var b=0,a=0;if(typeof window.innerWidth!="undefined"){var c=c||window;b=c.innerWidth;a=c.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){var c=c||document.documentElement;b=c.clientWidth;a=c.clientHeight}}return{width:b,height:a}};$.fn.bgiframe=function(b){if($.browser.msie&&$.browser.version=="6.0"){b=$.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},b||{});var c=function(d){return d&&d.constructor==Number?d+"px":d},a='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+b.src+'"style="display:block;position:absolute;z-index:-1;'+(b.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(b.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":c(b.top))+";left:"+(b.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(b.left))+";width:"+(b.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":c(b.width))+";height:"+(b.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":c(b.height))+';"/>';return this.each(function(){if($("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(a),this.firstChild)}})}return this};xl.ui.showCover=function(c,f,a){c=(c==undefined?true:c);a=a||"_cover_";if(c){if(!xl(a)){var j=$.browser.msie?document.body:(document.documentElement?document.documentElement:document.body);var e=j.offsetHeight;if(e<document.documentElement.clientHeight){e=document.documentElement.clientHeight}var g=$('<div id="'+a+'"></div>'),b=$(window).width(),d=e;g.css({background:"#666666",filter:"alpha(opacity=60)","-moz-opacity":0.6,opacity:0.6,position:"absolute",left:0,top:0,"z-index":900,width:document.documentElement.clientWidth,height:d+"px"});if(typeof f=="object"){g.css(f)}$(document.body).append(g);$("#"+a).bgiframe()}else{$("#"+a).css({height:$(window.document).height()<document.documentElement.clientHeight?document.documentElement.clientHeight:$(window.document).height(),width:document.documentElement.clientWidth}).show()}}else{$("#"+a).hide()}};$.fn.popupOpen=function(k,e){var k=k||function(){},e=e===undefined?true:e,j=$(this).width(),d=$(this).height(),l=document.documentElement.scrollTop+document.body.scrollTop,c=document.documentElement.scrollLeft,a=xl.ui.getViewPort().width,g=xl.ui.getViewPort().height,b=a/2-j/2+c,f=g/2-d/2+l;if(e){xl.ui.showCover()}$(this).css({top:(f>0?f:0)+"px",left:b+"px",position:"absolute"});$(this).fadeIn(100);k($(this));return $(this)};$.fn.popupClose=function(b,a){var b=b||function(){},a=a===undefined?true:a;$(this).fadeOut(100);if(a){xl.ui.showCover(false)}b($(this));return $(this)};xl.form={};xl.form.loginWebGame=Class.create({initialize:function(a,b){this.failMsg={0:"链接服务器超时，请刷新页面后重试!",1:"登录验证失败,请重新登录!"};this.gameid=a||"000000";this.clientid=b||null},loginGame:function(f,e){var c=e.serverid;var b=e.serveraddress;var a=e.seqid;var d={username:f,serverid:c,loginurl:b,Random:+new Date,gameid:this.gameid,sid:a};this.doLogin(d)},loginGameForSid:function(a){var b={sid:a};this.doLogin(b)},doLogin:function(a){if(this.clientid){a.clientid=this.clientid}var b=this;this.loginGameUrl=xl.gameServiceUrl+"loginWithServerid.webGameLogin";xl.getScript(this.loginGameUrl,a,function(d){if(!d){alert(b.failMsg[0]);return false}else{if(d.loginStatus==1){alert(d.rtnMsg);if(b.fail){b.fail()}return false}if(d.gameLoginStatus==0){var c=d.gameLoginURL||"";if(!c){alert(d.rtnMsg);if(b.fail){b.fail()}return false}try{if(b.success){b.success(c,b.gameid)}else{if(xl.P("c")!=1){xl.jumpTo(c)}else{location.href=c}}}catch(f){alert("异常："+f)}}else{alert(d.rtnMsg)}}},"gameLoginRtn")},success:null,fail:null});xl.gameServerList=Class.create({initialize:function(a){this.gameid=a.gameid;this.gameDomain=a.gameDomain;this.gameSiteName=a.title?a.title:document.title;this.list=(typeof webgameSingleGameServers!="undefined")?webgameSingleGameServers:[];this.gameLoginer=new xl.form.loginWebGame(this.gameid);this.gmLogSuccess=a.gmLogSuccess;this.gmLogFail=a.gmLogFail;var b=this;if(typeof this.gmLogSuccess=="function"){this.gameLoginer.success=this.gmLogSuccess}this.gameLoginer.fail=function(){var c=xl.gameServiceUrl+"logout.webGameLogin?r="+(+new Date);xl.getScript(c,null,function(d){xl.delCookie("xlwg_loginstate");xl.delCookie("xl_validUname");b.closeServerList();if(typeof b.gmLogFail=="function"){b.gmLogFail()}})};this.initLoginedSvrCookie()},initLoginedSvrCookie:function(){var a=xl.getCookie("xl_validUname");if(a){var c=this;var b=this.getLogedSvrs()||"";if(!b||b=="NAN"){xl.getScript(xl.gameServiceUrl+"queryLoginedsvr.webGameLogin",{gameid:this.gameid},function(d){setTimeout(function(){c.fillLatestLoginSvr()},100)},"_loginedSvr_",false)}}},recServer:function(){for(var b=0,a=this.list.length;b<a;b++){if(this.list[b].isrecommand==1){return this.list[b]}}return this.list[0]},getServerById:function(d,b){for(var c=0,a=this.list.length;c<a;c++){if(this.list[c].serverid==d||this.list[c].seqid==d){return this.list[c]}}if(b){return this.list[0]}else{return null}},jumpToRecGameServer:function(){if(this.list.length==0){return false}var a=this.recServer();var b=xl.getCookie("xl_validUname");this.gameLoginer.loginGame(b,a)},loadServerList:function(){var d=this;try{var c=xl.getCookie("xl_validUname");var a=xl.getCookie("_loginedSvrs_"+this.gameid+"_"+encodeURIComponent(c));if(!a){xl.getScript(xl.gameServiceUrl+"queryLoginedsvr.webGameLogin",{gameid:d.gameid},function(e){$.get(d.gameDomain+"/template/svrList.html?_="+(new Date()).getTime(),function(f){if(!$(".ser_flow")[0]){$(document.body).append(f);d.regEventForList()}})},"logedReload_",false)}else{$.get(this.gameDomain+"/template/svrList.html?_="+(new Date()).getTime(),function(e){if(!$(".ser_flow")[0]){$(document.body).append(e);d.regEventForList()}})}}catch(b){}},closeServerList:function(){$(".ser_flow").popupClose().remove()},regEventForList:function(){var a=this;$(".ser_flow a.close,.ser_flow a.shut").unbind().click(function(){a.closeServerList();return false});this.fillSvrList();$(".ser_flow").popupOpen()},fillSvrList:function(){var a=this;this.initSvrList();$(".ser_flow").find("a[isuse]").unbind().bind("click",function(){var b=$(this).attr("isuse");if(parseInt(b)){var c=$(this).attr("svrid");var d=a.getServerById(c,true);var e=xl.getCookie("xl_validUname");a.closeServerList();a.gameLoginer.loginGame(e,d);setTimeout(function(){a.fillLatestLoginSvr()},2000)}});$($(".ser_btn").find("a")[0]).unbind().bind("click",function(){xl.addBookmark(a.gameSiteName,a.gameDomain)})},getLogedSvrs:function(){var a=xl.getCookie("xl_validUname");var b=xl.getCookie("_loginedSvrs_"+this.gameid+"_"+encodeURIComponent(a));return b?b:null},fillLatestLoginSvr:function(p){var m=this;var h=xl.getCookie("xl_validUname");var d=this.getLogedSvrs();var g,c,e,a,k=[];var o=$("#latestSvr");o.unbind();if(d&&d!="NAN"){var n=d.split("|");var b="";for(var j=0,f=n.length;j<f;j++){b=n[j];g=m.getServerById(b,false);if(g){break}}if(g&&m.list.length>0){c=g.servername;e=g.serverid;o.html('<span class="txt">'+c+"</span>");if(typeof p=="function"){p()}if(o[0]){o[0].onclick=function(){if(g.inuse){m.gameLoginer.loginGame(h,g)}else{alert("服务器维护中，请选择其它可用服务器。")}};o[0].ondbclick=function(){return false}}}else{o.html("无")}}else{o.html("无")}},initSvrList:function(){},svrItemRender:function(){},getSvrState:function(){}});xl.gameServiceUrl="http://svr.game.xunlei.com/";xl.makeServiceUrlArray=function(){var a=[];if(Math.random()*10>3){a.push("http://websvr.youxi.xunlei.com/");a.push("http://svr.game.xunlei.com/")}else{a.push("http://svr.game.xunlei.com/");a.push("http://websvr.youxi.xunlei.com/")}a.push("http://svr2.game.xunlei.com/");return a};xl.gameServiceUrlArray=xl.makeServiceUrlArray();xl.ping=Class.create({initialize:function(){this.onerrortimes=0;this.url=[];this.imgUrl=[];this.show=false;this.hadPing=false;if(!document.getElementById("_ping_")){$('<img src="" style="display:none" id="_ping_"/>').appendTo("body")}},doPing:function(b,a){var c=this;b=b[0]||xl(b);if(!b){return false}b.style.visibility="hidden";if($.browser.msie){b.onreadystatechange=function(){if(b.readyState=="complete"){c.pingOk(b,a)}}}else{b.onload=function(){c.pingOk(b,a)}}if(this.hadPing){this.onerrortimes=0}this.setUrl(b,this.imgUrl[this.onerrortimes]);this.timer=setInterval(function(){if(c.onerrortimes>=c.size()){c.onerrortimes=0}c.setUrl(b,c.imgUrl[c.onerrortimes++])},3000)},setUrl:function(b,a){if(b){b.setAttribute("src",a+String(Date.parse(new Date())))}},pingOk:function(o,aimUrl){if(this.timer){clearInterval(this.timer);this.timer=null}if(this.onerrortimes>=this.size()){this.onerrortimes--}eval("("+aimUrl+'="'+this.url[this.onerrortimes]+'")');var _this=this;this.hadPing=true;setTimeout(function(){if(_this.cb){_this.cb()}},0);if(this.show&&o){o.style.visibility="visible"}},size:function(){return this.url.length}});xl.pingGameService=Class.create(xl.ping,{init:function(c,a){var d=this;this.cb=a;this.onerrortimes=0;this.url=xl.gameServiceUrlArray;this.imgUrl=[this.url[0]+"monitor.gif?_=",this.url[1]+"monitor.gif?_=",this.url[2]+"monitor.gif?_="];var b=$("#_ping_");setTimeout(function(){d.doPing(b,c)},0)}});(new xl.pingGameService()).init("xl.gameServiceUrl");xl.verifyCode=Class.create({initialize:function(){var d="http://verify2.xunlei.com/image?t=MDA&_=";var c="http://verify3.xunlei.com/image?t=MDA&_=";var b="http://verify.xunlei.com/image?t=MDA&_=";this.onerrortimes=0;this.timer=0;this.interval=3000;this.hadPing=false;this.url=[d,c,b];if(!xl("_pingVCode_")){var a=document.createElement("img");a.style.display="none";a.id="_pingVCode_";document.body.appendChild(a)}this.pingImg=xl("_pingVCode_")},loadVerifyCode:function(a){if(this.timer){clearInterval(this.timer);this.timer=0}var b=this;a=a[0]||xl(a);if(!a){return false}this.timer=setInterval(function(){if(b.onerrortimes>=b.url.length){b.onerrortimes=0}b.setUrl(b.pingImg,b.url[++b.onerrortimes])},b.interval);if($.browser.msie){this.pingImg.onreadystatechange=function(){if(b.pingImg.readyState=="complete"){b.loadOk(a)}}}else{this.pingImg.onload=function(){b.loadOk(a)}}this.setUrl(this.pingImg,this.url[this.onerrortimes])},setUrl:function(b,a){if(b){b.setAttribute("src",a+String(Date.parse(new Date())))}},loadOk:function(a){if(this.timer){clearInterval(this.timer);this.timer=0}if(a){a.setAttribute("src",this.url[this.onerrortimes]+String(Date.parse(new Date())))}a.style.visibility="visible";this.hadPing=true},index:function(){var a=2;switch(this.onerrortimes){case 0:a=2;break;case 1:a=3;break;case 2:a=1;break}return a}});var xl_verifyCode=new xl.verifyCode();function verifycode_refresh(a){xl_verifyCode.loadVerifyCode(a)}xl.loadVCode=function(b){b=b[0]||xl(b);if(!b){return false}b.style.visibility="hidden";if($.browser.msie){b.onreadystatechange=function(){if(b.readyState=="complete"){b.style.visibility="visible"}}}else{b.onload=function(){b.style.visibility="visible"}}var a="http://verify2.xunlei.com/image?"+String(Date.parse(new Date()));b.setAttribute("src",a)};xl.CheckUser=function(f,a,c){var g=f.username;var b=f.url?f.url:xl.gameServiceUrl+"checkuser.webGameLogin";function d(){return{username:g.value,refresh_time:new Date().getTime()}}var e=g.value;if(/^[a-zA-Z0-9_]{6,16}$/.test(e)){xl.getScript(b,d(),function(h){h=h||{};if(typeof c=="function"){c(h.regRtn)}},"data",false)}else{if(typeof a=="function"){a()}}};xl.userLogin=function(c,d,a){a=a===undefined?true:false;var b=xl.gameServiceUrl+"newlogin.webGameLogin";d=d||function(e){alert(e.msg)};if(typeof webgameSingleGameServers!="undefined"){if(webgameSingleGameServers.length&&typeof webgameSingleGameServers[0]=="object"){xl.extend(c,{gameid:webgameSingleGameServers[0].gameid})}}xl.getScript(b,c,d,"_login_return_",a)};xl.UserReg=function(f,b,d){var j=f.username;var c={url:xl.gameServiceUrl+"newregandlogin3.webGameLogin",rtnName:"_regResult_",callback:function(e){if(!e){alert("抱歉！链接服务器超时，请关闭或刷新网页后重试。");return false}if(e.regRtn==0){if(typeof xl.regSuccess=="function"){xl.regSuccess(e)}else{alert(e.msg||e.rtnMsg)}}else{alert(e.msg||e.rtnMsg)}if(e.regRtn!=300){e.username=j;if(typeof b=="function"){b(e)}}}};var a="";try{var h=new ActiveXObject("DapCtrl.DapCtrl");a=h.Get("sPeerID")}catch(g){}f.data.peerid=a;if(typeof d=="function"){d(f)}xl.getScript(c.url,f.data,c.callback,c.rtnName)};xl.logout=function(c){var b=xl.getCookie("xl_validUname");var a=xl.gameServiceUrl+"logout.webGameLogin?username="+b;xl.getScript(a,null,function(d){if(!d){alert("抱歉！链接服务器超时，请关闭或刷新网页后重试。");return false}if(d){xl.delCookie("xl_validUname");if(c){c(b)}}})};xl.checkPasswordLevel=function(b,a){if(!a){return}$(b).bind("keyup",function(){var k=this.val().trim();var o=0;if(k.length==0){o+=0}else{if(k.length<8&&k.length>0){o+=5}else{if(k.length>10){o+=25}else{o+=10}}}var g=false;var f=false;var d=k.match(/[A-Z]{1}/);var h=k.match(/[a-z]{1}/);if(d==null&&h==null){o+=0;g=false}else{if(d!=null&&h!=null){o+=20;f=true}else{o+=10;f=true}}var e=false;var m=0;for(var j=0;j<k.length;j++){if(k.charAt(j)<="9"&&k.charAt(j)>="0"){e=true;m+=1}}if(m==0){o+=0;e=false}else{if(m>2){o+=20;e=true}else{o+=10;e=true}}var l=false;var n=0;for(var j=0;j<k.length;j++){if((k.charAt(j)>="0"&&k.charAt(j)<="9")||(k.charAt(j)>="A"&&k.charAt(j)<="Z")||(k.charAt(j)>="a"&&k.charAt(j)<="z")){continue}n+=1;l=true}if(n==0){o+=0;l=false}else{if(n>1){o+=25;l=true}else{o+=10;l=true}}if(f&&e&&l){o+=5}else{if(g&&e&&l){o+=3}else{if(g&&e){o+=2}}}var c="";if(o>=90){c="rank r7"}else{if(o>=80){c="rank r6"}else{if(o>=70){c="rank r5"}else{if(o>=60){c="rank r4"}else{if(o>=50){c="rank r3"}else{if(o>25){c="rank r2"}else{if(o>0){c="rank r1"}else{c="rank r0"}}}}}}}a.className=c})};xl.isChinaIdCardNo18=function(e){var b=["1","0","X","9","8","7","6","5","4","3","2"];var d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];e=e.toUpperCase();if(e&&e.length==18){var c=0;for(var a=0;a<17;a++){c+=parseInt(e.substring(a,a+1))*d[a]}if(e.charAt(17)==b[c%11]){return true}}return false};xl.isChinaIdCardNoDetail=function(g){var c=[11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,91];var b=parseInt(g.substring(0,2),10);var h=false;for(var d=0;d<c.length;d++){if(c[d]==b){h=true;break}}var e=parseInt(g.substring(6,10),10);var f=parseInt(g.substring(10,12),10);var a=parseInt(g.substring(12,14),10);if(g.length==15){e=1900+parseInt(g.substring(6,8),10);f=parseInt(g.substring(8,10),10);a=parseInt(g.substring(10,12),10);if(e>1980){return false}}if(e<1800||f<=0||f>12||a<=0||a>31){h=false}if(h){if((e%4==0&&e%100!=0)||e%400==0){if(f==2&&a>29){h=false}}else{switch(f){case 1:case 3:case 5:case 7:case 8:case 10:case 12:if(a>31){h=false}break;case 4:case 6:case 9:case 11:if(a>30){h=false}break;case 2:if(a>28){h=false}break;default:h=false}}}return h};xl.isChinaIdCardNo=function(a){if(xl.isChinaIdCardNoSimple(a)){if(a.length==18){return xl.isChinaIdCardNo18(a)&&xl.isChinaIdCardNoDetail(a)}else{if(a.length==15){return xl.isChinaIdCardNoDetail(a)}}}return false};xl.isAdult=function(c){if(c<=18000101){return false}else{if(c<=19920101){return true}else{var b=new Date();var f=c+"";var d=c/10000;var a=parseInt(f.substring(4,6));var e=parseInt(f.substring(6,8));if(b.getYear()-d>18){return true}else{if((b.getYear())-d==18){if(a>0&&a<13){if(a<(b.getMonth()+1)){return true}else{if(a==(b.getMonth()+1)){if(e>0&&e<=31&&e<=b.getDate()){return true}else{return false}}else{return false}}}else{return false}}else{return false}}}}};xl.isAdultFromCardNo=function(b){if(!b||!xl.isChinaIdCardNo(b)){return false}else{if(!(typeof b.trim().substring(0,1))=="number"){return true}else{var a=null;if(b.length==15){a="19"+b.substring(6,12)}else{if(b.length==18){a=b.substring(6,14)}}if(typeof a=="number"){return xl.isAdult(parseInt(a))}}}return false};xl.validation=function(a,b){var c=this;this.validArr=[];this.formData={};this.rules={required:function(d){return"required"},email:function(e){var d=e.value;return/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+[.])+([a-zA-Z0-9]{2,4})+$/.test(d)?0:1},username:function(e){var d=e.value;if(/^[a-zA-Z0-9_]{6,16}$/.test(d)&&/[a-zA-Z_]/.test(d)){return 0}else{if(d.length<6){return 1}else{if(d.length>16){return 2}else{if(/^\d*$/.test(d)){return 3}else{if(!/^[a-zA-Z0-9_]*$/.test(d)){return 4}}}}}},password:function(e){var d=e.value;if(d.length>=6&&d.length<=16){return 0}else{if(d.length<6){return 1}else{return 2}}},repassword:function(d){if((d?d.value:null)==$(c.cfg.container).find("#r_password").val()){return 0}else{return 1}},truename:function(e){var d=e.value;return((/^[\u4e00-\u9fa5]*$/.test(d))&&d.length<=20)?0:1},idcard:function(h){var e=h.value;var f=/^\d{17}[xX0-9]{1}|\d{15}$/;if(f.test(e)){var d=xl.isChinaIdCardNoDetail(e);var g=xl.isChinaIdCardNo18(e);if(e.length==18){if(g&&d){return 0}else{return 3}}else{if(e.length==15){if(!d){return 3}else{return 0}}}}return 1}};this.cfg={container:$("body"),pass:function(){},showErr:function(d){$(d).parent().find(".default_info").hide();$(d).parent().find(".error_info").show();$(d).parent().find(".correct_info").hide()},clearErr:function(d){$(d).parent().find(".default_info").show();$(d).parent().find(".error_info").hide();$(d).parent().find(".correct_info").hide()},showOk:function(d){$(d).parent().find(".default_info").hide();$(d).parent().find(".error_info").hide();$(d).parent().find(".correct_info").show()},extValid:function(){return true}};xl.extend(this.cfg,a||{});xl.extend(this.rules,b||{})};xl.validation.prototype={validate:function(b,h){var j=this;var f=(b.disabled==false)?($(b).attr("valid")?$(b).attr("valid"):"").split(/\s+/):[];var g=b.value;var a=$(b).parent().find(".error_info");a.hide();var d=$(b).parent().find(".default_info");for(var c=0;c<f.length;c++){if(j.rules[f[c]]){var k=j.rules[f[c]](b);if($.trim(g)==""&&k=="required"){var e=d.html();if(e==""||!e){e=xl.info[b.name][0]}a.html(e);j.cfg.showErr(b);return false;break}if(k>0&&$.trim(g)!=""){a.html(xl.info[b.name][k]);j.cfg.showErr(b);return false;break}}}if(typeof h=="function"){h()}else{j.cfg.showOk(b)}return true},checkAll:function(){var b=0;for(var c=0,a=this.validArr.length;c<a;c++){if(this.validArr[c].name){this.formData[this.validArr[c].name]=this.validArr[c].value}if(!this.validate(this.validArr[c])){b++}}this.setVCodeSvr();if(this.rules.extValid){if(!this.rules.extValid()){b++}}else{if(!this.cfg.extValid()){b++}}if(b>0){return false}else{return true}},reset:function(){for(var b=0,a=this.validArr.length;b<a;b++){this.cfg.clearErr(this.validArr[b])}this.cfg.container.find("form").each(function(){this.reset()})},setVCodeSvr:function(){var b=this.cfg.container.find("#verifycodeImg").attr("src");if(!b){return false}var a=2;if((new RegExp("://verify3\\.")).test(b)){a=3}if((new RegExp("://verify\\.")).test(b)){a=1}this.formData.vcodeflag=a}};xl.wgRegisterRender=Class.create({initialize:function(a,c){var b=this;this.cfg={pass:xl.UserReg,container:a};this.rules={extValid:function(){var d=a.find("#r_s")[0];if(!d.checked){$(d).parent().find(".error_info").html(xl.info[d.name][0]).show();return false}return true}};if(!a.find("form[name=regform]")[0]){$(xl.forms.regform).appendTo(a)}this.valid=new xl.validation(this.cfg,this.rules);this.form=a.find("form[name=regform]");this.verifycode=this.form.find("#r_verifycode");(function(){b.form.find("#verifycodeImg").removeAttr("style").hide();b.verifycode.attr({valid:"required","class":"ipt_tx",maxlength:"5",autocomplete:"off"});b.verifycode.parent().show();b.comm_vcode_img=$("#commonVerifycodeImg");if(!xl("commonVerifycodeImg")){$('<div style="width:140px;height:80px;background:#fff;display:none"><img src="" id="commonVerifycodeImg"/><p><a href="javascript:;" style="color:#000;text-decoration: underline;margin-left:4px">看不清，换一个？</a></p></div>').appendTo("body");b.comm_vcode_img=$("#commonVerifycodeImg");b.comm_vcode_img.next().find("a").click(function(){verifycode_refresh(b.comm_vcode_img);return false})}})();this.valid.validArr=this.form.find("[valid]");this.callback=c;this.validcallback={blur:[function(){var d=b.form.find("#r_username");xl.CheckUser({username:d[0]},null,function(e){var f=d.parent();f.find(".default_info").hide();if(e!=0){xl.userexist=true;f.find(".error_info").html(xl.info[d[0].name][5]).show();f.find(".correct_info").hide()}else{xl.userexist=false;f.find(".error_info").hide();f.find(".correct_info").show()}})},null,null,null,null,null],focus:[function(){xl.userexist=true},null,null,null,null,function(){var f=b.comm_vcode_img;var e=f.attr("src");if(!e){verifycode_refresh(f)}var d=f.parent();d.css({position:"absolute",top:b.verifycode.offset().top-80,left:b.verifycode.offset().left,"z-index":3000}).show();if($.trim(b.verifycode.val()).length==5){verifycode_refresh(f);b.verifycode.val("").focus()}b.verifycode.unbind("keypress").bind("keypress",function(g){if(g.keyCode==13){b.form.find("#r_s").focus();d.hide();$(this).unbind("keypress")}});$(document.body).unbind().bind("click",function(j){if(j.target.id=="r_verifycode"){return}function g(k){k=k?k:(window.event?window.event:null);return k}function h(l,o){l=g(l);var m=document.documentElement;if(!o){return false}var p=$(o).offset();var k=$(o).width();var n=$(o).height();if(parseFloat(p.left)<parseFloat(l.clientX)&&(parseFloat(p.left)+parseFloat(k))>parseFloat(l.clientX)&&parseFloat(p.top)<(parseFloat(l.clientY)+parseFloat(m.scrollTop))&&(parseFloat(p.top)+parseFloat(n))>(parseFloat(l.clientY)+parseFloat(m.scrollTop))){return true}else{return false}}if(!h(j,d)){d.hide();$(document.body).unbind("click")}})}]}},render:function(){this.bindEvent()},bindEvent:function(){this.form.onsubmit=function(){return false};var a=this;this.valid.validArr.each(function(b){$(this).attr("autocomplete","off");var c=this;$(c).bind("blur",function(){a.blur(c,a.validcallback.blur[b])});$(c).bind("focus",function(){a.focus(c,a.validcallback.focus[b])})});this.form.find("input[type=checkbox]").unbind().bind("click",function(){var d=a.form.find("button[type=submit]");if(!d.parent().next(".unagree")[0]){$('<li class="unagree" style="display:none">您需接受用户使用协议后方可进行下一步操作</li>').appendTo(a.form.find("ul"))}var c=d.parent().next(".unagree");var b=$("#reg_forgetpwd_link");if(this.checked){c.hide();d.removeAttr("disabled");d.parent().show();b.show()}else{d.attr("disabled","disabled");d.parent().hide();c.show();b.hide()}});this.form.find("button[type=submit]").unbind().bind("click",function(){a.comm_vcode_img.parent().hide();if(xl.userexist){return false}var b=$(this);b.attr("disabled","disabled");var c=a.valid.checkAll();if(c&&a.valid.cfg.pass){a.valid.formData.truename=encodeURIComponent(a.valid.formData.truename);xl.extend(a.valid.formData,{regvflag:1});a.valid.cfg.pass({data:a.valid.formData,username:a.form.find("#r_username").val()},function(d){if(d.regRtn==0){xl.setCookie("_loginedXunleiUser_",a.form.find("#r_username").val(),{expires:"forever"});a.valid.reset()}a.verifycode.val("");if(typeof a.callback=="function"){a.callback(d)}b.removeAttr("disabled");verifycode_refresh(a.comm_vcode_img)},function(){a.comm_vcode_img.parent().hide()});return false}else{if(c){b.removeAttr("disabled");return true}else{b.removeAttr("disabled");return false}}return false})},blur:function(a,b){this.valid.validate(a,b)},focus:function(a,b){if($(a)[0].tagName.toLowerCase()=="input"){a.select()}this.valid.cfg.clearErr(a);if(typeof b=="function"){b(a)}}});xl.reg=(function(){function a(b,d){var c=new xl.wgRegisterRender(b,d);c.render()}return{init:a}})();xl.userexist=false;xl.welcomebtn=false;xl.loginRender=Class.create({initialize:function(a,c){var b=this;if(!a.find("form[name=logform]")[0]){$(xl.forms.logform).appendTo(a)}this.form=a.find("form[name=logform]");this.elems=this.form.find("[valid]");this.username=this.form.find("#l_username");this.verifycode=this.form.find("#l_verifycode");this.cb=c;this.callback={blur:[function(){var f=b.username;var e=f.val().trim();var d=f.attr("msg");if(e==""){f.val(d)}},null,null,null],focus:[function(){var f=b.username;var e=f.val().trim();var d=f.attr("msg");f.removeAttr("style");if(e==d){f.val("")}},null,function(){var g=b.verifycode;var f=b.comm_vcode_img;var e=f.attr("src");if(!e){verifycode_refresh(f)}var d=f.parent();d.css({position:"absolute",top:g.offset().top-80,left:g.offset().left,"z-index":3000}).show();if($.trim(g.val()).length==5){verifycode_refresh(f);g.val("").focus()}b.verifycode.unbind("keypress").bind("keypress",function(h){if(h.keyCode==13){b.form.find("#r_s").focus();d.hide();$(this).unbind("keypress")}});$(document.body).unbind().bind("click",function(k){if(k.target.id=="l_verifycode"){return}function h(l){l=l?l:(window.event?window.event:null);return l}function j(m,p){m=h(m);var n=document.documentElement;if(!p){return false}var q=$(p).offset();var l=$(p).width();var o=$(p).height();if(parseFloat(q.left)<parseFloat(m.clientX)&&(parseFloat(q.left)+parseFloat(l))>parseFloat(m.clientX)&&parseFloat(q.top)<(parseFloat(m.clientY)+parseFloat(n.scrollTop))&&(parseFloat(q.top)+parseFloat(o))>(parseFloat(m.clientY)+parseFloat(n.scrollTop))){return true}else{return false}}if(!j(k,d)){d.hide();$(document.body).unbind("click")}})},null]};this.init()},render:function(){this.bindEvent()},init:function(){var b=xl.getCookie("_loginedXunleiUser_");if(b){this.username.val(b)}var c=this;(function(){c.form.find("#verifycodeImg").removeAttr("style").hide();c.verifycode.attr({valid:"required","class":"ipt_tx",maxlength:"5",autocomplete:"off"});c.verifycode.parent().show();c.comm_vcode_img=$("#commonVerifycodeImg");if(!xl("commonVerifycodeImg")){$('<div style="width:140px;height:80px;background:#fff;display:none"><img src="" id="commonVerifycodeImg"/><p><a href="javascript:;" style="color:#000;text-decoration: underline;margin-left:4px">看不清，换一个？</a></p></div>').appendTo("body");c.comm_vcode_img=$("#commonVerifycodeImg");c.comm_vcode_img.next().find("a").click(function(){verifycode_refresh(c.comm_vcode_img);return false})}})();this.firstLogNoVCodeFlag=true;var a=xl.getCookie("enable_vcode")||"";if(a+""=="1"){this.firstLogNoVCodeFlag=false;this.verifycode.parent().show()}else{this.verifycode.parent().hide()}},bindEvent:function(){var a=this;this.form.onsubmit=function(){return false};this.elems.each(function(b){var c=$(this);$(c).bind("blur",function(){a.blur(c,a.callback.blur[b])});$(c).bind("focus",function(){a.focus(c,a.callback.focus[b])})});this.form.find("input[type=checkbox]").unbind().bind("click",function(){var d=a.form.find("button[type=submit]");if(!d.parent().next(".unagree")[0]){$('<li class="unagree" style="display:none">您需接受用户使用协议后方可进行下一步操作</li>').appendTo(a.form.find("ul"))}var c=d.parent().next(".unagree");var b=$("#reg_forgetpwd_link");if(this.checked){c.hide();d.removeAttr("disabled");d.parent().show();b.show()}else{d.attr("disabled","disabled");d.parent().hide();c.show();b.hide()}});this.form.find("button[type=submit]").bind("click",function(){a.comm_vcode_img.parent().hide();var b=a.username;var e=a.form.find("#l_password");var c=b.val();var h=b.attr("msg");var g=e.val();var f=a.verifycode.val();var j=xl.getCookie("VERIFY_KEY");if(!c||c.trim()==""||h==c){alert("请输入账号");return false}if(!g){alert("请输入密码");return false}if(!f&&!a.firstLogNoVCodeFlag){alert("请输入验证码");return false}var d={username:c,password:g,vcodestr:f,vcode:j,vcodeflag:a.getVCodeSvr(),vflag:1,aqlevelflag:1};xl.userLogin(d,function(k){verifycode_refresh(a.comm_vcode_img);if(!k){alert("抱歉！链接服务器超时，请关闭或刷新网页后重试。");return false}xl.extend(k,{username:c});if(typeof a.cb=="function"){a.cb(k)}if(k.loginStatus==0){xl.setCookie("_loginedXunleiUser_",d.username?d.username:"",{expires:"forever"});a.form[0].reset();a.init()}else{a.verifycode.parent().show();a.firstLogNoVCodeFlag=false}});return false})},blur:function(a,b){if(typeof b=="function"){b(a)}},focus:function(a,b){if($(a)[0].tagName.toLowerCase()=="input"){a.select()}if(typeof b=="function"){b(a)}},getVCodeSvr:function(){var b=this.comm_vcode_img.attr("src");if(!b){return 2}var a=2;if((new RegExp("://verify3\\.")).test(b)){a=3}if((new RegExp("://verify\\.")).test(b)){a=1}return a}});xl.login=(function(){function a(b,d){var c=new xl.loginRender(b,d);c.render()}return{init:a}})();xl.logPopwin=(function(){function a(e){var c=$("#popwin");var b=$("#commonVerifycodeImg").parent();xl.reg.init(c.find("#preg_box"),e.regAfter);xl.login.init(c.find("#plog_box"),e.logAfter);var d=new xl.ui.Tabs(c.find(".log_reg_tabs a[class!=shut_down]"),$("#popwin .reg_box"),"up");d.init("click",function(){b.hide()});c.find("#close").bind("click",function(){b.hide();c.popupClose()});if(typeof e.extend=="function"){e.extend()}}return{init:a}})();xl.info={username:["6-16个字母数字组合","长度不能少于6位","长度不能多于16位","不能全为数字","不能有特殊符号","帐号已存在"],password:["6-16个任意字符组合","长度不能少于6位","长度不能多于16位"],confirmPassword:["请确认密码","确认密码与密码不一致"],verifycode:["请输入验证码","验证码输入错误"],truename:["20个以内的中文字符","20个以内的中文字符"],idcard:["15-18位数字字母组合","15-18位数字字母组合","未成年人无法注册","输入身份证不合法"],email:["输入正确格式的电子邮箱","请输入正确格式的电子邮箱"],protect:["请选择密保问题"],anwser:["48个以内的字符或24个中文字符","请输入48个以内的字符或24个中文字符"],s:["您必须同意此条款"]};xl.forms=(function(){var a='<form name="regform" onsubmit="return false">	<ul>		<li><label>用户名：</label><input type="text" maxlength="16" valid="required username" id="r_username" name="username" class="ipt_tx"><span class="default_info" style="display:block">'+xl.info.username[0]+'</span><span class="error_info"></span><span class="correct_info">该帐号可用</span></li>		<li><label>密码：</label><input type="password" maxlength="16" valid="required password" id="r_password" name="password" class="ipt_tx"><span class="default_info" style="display:block">'+xl.info.password[0]+'</span><span class="error_info"></span><span class="correct_info">该密码格式正确</span></li>		<li><label>确认密码：</label><input type="password" maxlength="16" valid="required repassword" id="r_confirmPassword" name="confirmPassword" class="ipt_tx"><span class="default_info" style="display:block">'+xl.info.confirmPassword[0]+'</span><span class="error_info"></span><span class="correct_info">密码确认成功</span></li>		<li><label>真实姓名：</label><input id="truename" name="truename" valid="required truename" type="text" class="ipt_tx" /><span style="display: block;" class="default_info">20个以内的中文字符</span><span class="error_info"></span><span class="correct_info">姓名格式正确</span></li>		<li><label>身份证号：</label><input id="idcard" name="idcard" valid="required idcard" type="text" class="ipt_tx" /><span style="display: block;" class="default_info">15-18位数字字母组合</span><span class="error_info"></span><span class="correct_info">身份证格式正确</span></li>		<li><label>验证码：</label><input type="text" maxlength="5" valid="required" id="r_verifycode" name="verifycode" class="yzm" title="点击获取验证码"><img style="visibility:hidden" src="" id="verifycodeImg" style="width:50px;height:20px"/><span class="default_info" style="display:block">'+xl.info.verifycode[0]+'</span><span class="error_info"></span><span class="correct_info">验证码已输入</span></li>		<li class="agree"><input type="checkbox" checked value="1" id="r_s" name="s">同意并接受<a href="http://youxi.xunlei.com/agreement.html" target="_blank">《用户使用协议》</a></li>		<li class="last"><button type="submit" id="btn_regist" class="btn"> 注册 </button></li>	</ul></form>';var b='<form name="logform" onsubmit="return false">	<ul>		<li><label>用户名：</label><input type="text" name="username" id="l_username" valid="required" msg="迅雷帐号或邮箱" value="迅雷帐号或邮箱"/></li>		<li><label>密码：</label><input type="password" name="password" id="l_password" valid="required"/></li>		<li><label>验证码：</label><input type="text" maxlength="5" class="yzm" name="verifycode" id="l_verifycode" valid="required" title="点击获取验证码"/><img style="visibility:hidden" id="verifycodeImg" src="" style="width:50px;height:20px"></li>		<li class="agree"><input type="checkbox" id="l_s" name="s" checked value="1" valid="required">已阅读并接受<a href="http://youxi.xunlei.com/agreement.html" target="_blank">《用户使用协议》</a></li>		<li class="last"><button type="submit" id="leftLoginBtn" class="log_btn">登录</button></li>	</ul></form>';return{regform:a,logform:b}})();xl.regpv=(function(){function a(c,d){}function b(c,e,d,f){}return{pv1:a,pv:b}})();xl.logpv=(function(){function a(c,d){}function b(c,e,d,f){}return{pv1:a,pv:b}})();(function(){if($.browser.msie&&/6.0/.test(navigator.userAgent)){document.execCommand("BackgroundImageCache",false,true)}})();