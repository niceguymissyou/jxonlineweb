(function(d){d.tiny=d.tiny||{};d.tiny.carousel={options:{start:1,display:1,axis:"x",controls:true,pager:false,interval:false,intervaltime:3000,rewind:false,animation:true,duration:1000,callback:null}};d.fn.tinycarousel_start=function(){d(this).data("tcl").start()};d.fn.tinycarousel_stop=function(){d(this).data("tcl").stop()};d.fn.tinycarousel_move=function(a){d(this).data("tcl").move(a-1,true)};function c(B,N){var J=this,K=d(".viewport:first",B),L=d(".overview:first",B),H=L.children(),M=d(".next:first",B),O=d(".prev:first",B),G=d(".pager:first",B),a=0,x=0,C=0,I=undefined,D=false,E=true,z=N.axis==="x";function F(){if(N.controls){O.toggleClass("disable",C<=0);M.toggleClass("disable",!(C+1<x))}if(N.pager){var e=d(".pagenum",G);e.removeClass("active");d(e[C]).addClass("active")}}function b(e){if(d(this).hasClass("pagenum")){J.move(parseInt(this.rel,10),true)}return false}function y(){if(N.interval&&!D){clearTimeout(I);I=setTimeout(function(){C=C+1===x?-1:C;E=C+1===x?false:C===0?true:E;J.move(E?1:-1)},N.intervaltime)}}function A(){if(N.controls&&O.length>0&&M.length>0){O.click(function(){J.move(-1);return false});M.click(function(){J.move(1);return false})}if(N.interval){B.hover(J.stop,J.start)}if(N.pager&&G.length>0){d("a",G).click(b)}}this.stop=function(){clearTimeout(I);D=true};this.start=function(){D=false;y()};this.move=function(g,f){C=f?g:C+=g;if(C>-1&&C<x){var e={};e[z?"left":"top"]=-(C*(a*N.display));L.animate(e,{queue:false,duration:N.animation?N.duration:0,complete:function(){if(typeof N.callback==="function"){N.callback.call(this,H[C],C)}}});F();y()}};function P(){a=z?d(H[0]).outerWidth(true):d(H[0]).outerHeight(true);var e=Math.ceil(((z?K.outerWidth():K.outerHeight())/(a*N.display))-1);x=Math.max(1,Math.ceil(H.length/N.display)-e);C=Math.min(x,Math.max(1,N.start))-2;L.css(z?"width":"height",(a*H.length));J.move(1);A();return J}return P()}d.fn.tinycarousel=function(a){var b=d.extend({},d.tiny.carousel.options,a);this.each(function(){d(this).data("tcl",new c(d(this),b))});return this}}(jQuery));